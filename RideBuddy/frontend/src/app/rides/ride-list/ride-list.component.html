<div class="container">
  <div class="page-header">
    <h1>Find Your Ride</h1>
    <p>Search for available rides to your destination</p>
  </div>

  <div class="search-card">
    <form [formGroup]="searchForm" (ngSubmit)="searchRides()">
      <div class="search-grid">
        <div class="form-group">
          <app-location-autocomplete
            label="From"
            placeholder="Search origin city..."
            formControlName="origin"
            (locationSelected)="onOriginSelected($event)">
          </app-location-autocomplete>
        </div>

        <div class="form-group">
          <app-location-autocomplete
            label="To"
            placeholder="Search destination city..."
            formControlName="destination"
            (locationSelected)="onDestinationSelected($event)">
          </app-location-autocomplete>
        </div>

        <div class="form-group">
          <label for="date">Date</label>
          <input 
            type="date" 
            id="date" 
            formControlName="date"
          />
        </div>

        <div class="form-group">
          <label>&nbsp;</label>
          <button type="submit" class="btn btn-primary" [disabled]="isLoading">
            {{ isLoading ? 'Searching...' : 'Search' }}
          </button>
        </div>
      </div>
    </form>
  </div>

  <app-loading-spinner 
    *ngIf="isLoading" 
    message="Finding available rides..."
    size="medium">
  </app-loading-spinner>

  <div class="rides-grid" *ngIf="!isLoading && rides.length > 0">
    <div class="ride-card" 
         *ngFor="let ride of rides" 
         [routerLink]="['/rides', ride.id]"
         [class.fully-booked]="ride.availableSeats === 0">
      
      <div class="fully-booked-badge" *ngIf="ride.availableSeats === 0">
        <i class="fa-solid fa-ban"></i> Fully Booked
      </div>
      
      <div class="ride-route">
        <div class="route-point">
          <i class="fa-solid fa-location-dot route-icon"></i>
          <span class="route-name">{{ ride.originName }}</span>
        </div>
        <div class="route-arrow"><i class="fa-solid fa-arrow-right"></i></div>
        <div class="route-point">
          <i class="fa-solid fa-flag-checkered route-icon"></i>
          <span class="route-name">{{ ride.destinationName }}</span>
        </div>
      </div>

      <div class="ride-details">
        <div class="detail-item" *ngIf="ride.driverName">
          <span class="label"><i class="fa-solid fa-user"></i> Driver</span>
          <span class="value">{{ ride.driverName }}</span>
        </div>
        <div class="detail-item">
          <span class="label"><i class="fa-regular fa-clock"></i> Departure</span>
          <span class="value">{{ formatDate(ride.departureTime) }}</span>
        </div>
        <div class="detail-item countdown" *ngIf="!dateFormatter.isPast(ride.departureTime)">
          <span class="label"><i class="fa-solid fa-hourglass-half"></i> Departs in</span>
          <span class="value highlight">{{ getCountdown(ride.departureTime) }}</span>
        </div>
        <div class="detail-item">
          <span class="label"><i class="fa-solid fa-chair"></i> Available Seats</span>
          <span class="value">{{ ride.availableSeats }}</span>
        </div>
        <div class="detail-item">
          <span class="label"><i class="fa-solid fa-coins"></i> Price per Seat</span>
          <span class="value price">{{ ride.pricePerSeat }} {{ ride.currency }}</span>
        </div>
      </div>

      <div class="ride-footer">
        <span class="btn btn-primary btn-sm">View Details</span>
      </div>
    </div>
  </div>

  <div class="empty-state" *ngIf="!isLoading && rides.length === 0">
    <div class="empty-icon"><i class="fa-solid fa-car-side"></i></div>
    <h3>No rides found</h3>
    <p>Try adjusting your search criteria or check back later</p>
  </div>
</div>
